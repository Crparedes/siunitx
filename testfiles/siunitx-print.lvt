\input{regression-test}

\RequirePackage{siunitx}

\START

\ExplSyntaxOn

\OMIT
\cs_set_protected:Npn \test:nn #1#2
  {
    \hbox_set:Nn \l_tmpa_box { \siunitx_print:nn {#1} {#2} }
    \box_show:N \l_tmpa_box
    \group_begin:
      \keys_set:nn { siunitx / print } { mode = text }
      \hbox_set:Nn \l_tmpa_box { \siunitx_print:nn {#1} {#2} }
      \box_show:N \l_tmpa_box
    \group_end:
  }
\TIMO

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST { Printing~units }
  {
    \test:nn { unit } { \mathrm {J}\,\mathrm {mol}^{-1}\,\mathrm {K}^{-1} }
  }

\END
